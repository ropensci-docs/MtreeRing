<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Use morphological image processing and edge detection algorithms to automatically measure tree ring widths on digital images. Users can also manually mark tree rings on species with complex anatomical structures. The arcs of inner-rings and angles of successive inclined ring boundaries are used to correct ring-width series. The package provides a Shiny-based application, allowing R beginners to easily analyze tree ring images and export ring-width series in standard file formats.">
<title>A Shiny Application for Automatic Measurements of Tree-Ring Widths on Digital Images • MtreeRing</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Shiny Application for Automatic Measurements of Tree-Ring Widths on Digital Images">
<meta property="og:description" content="Use morphological image processing and edge detection algorithms to automatically measure tree ring widths on digital images. Users can also manually mark tree rings on species with complex anatomical structures. The arcs of inner-rings and angles of successive inclined ring boundaries are used to correct ring-width series. The package provides a Shiny-based application, allowing R beginners to easily analyze tree ring images and export ring-width series in standard file formats.">
<meta property="og:image" content="https://docs.ropensci.org/MtreeRing/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="index.html">MtreeRing</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/app-MtreeRing.html">A Simple Workflow for Shiny App</a>
    <a class="dropdown-item" href="articles/detection-MtreeRing.html">MtreeRing: Measuring Tree Ring Width in R</a>
    <a class="dropdown-item" href="articles/pith-MtreeRing.html">Measure Tree Rings on Pith Side</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/MtreeRing">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="mtreering">MtreeRing<a class="anchor" aria-label="anchor" href="#mtreering"></a>
</h1>
</div>
<!--require(knitr);require(markdown);knit("README.Rmd")--><p><strong>Authors:</strong> <a href="https://www.researchgate.net/profile/Jingning-Shi" class="external-link">Jingning Shi</a>, <a href="https://www.researchgate.net/profile/Wei-Xiang-11" class="external-link">Wei Xiang</a><br><strong>License:</strong> <a href="https://cran.r-project.org/web/licenses/GPL-3" class="external-link">GPL3</a></p>
<!--pkg badges--><p><a href="https://api.travis-ci.org/ropensci/MtreeRing.svg?branch=master" class="external-link"><img src="https://api.travis-ci.org/ropensci/MtreeRing.svg?branch=master" alt="TravisCI Build Status"></a> <a href="https://ci.appveyor.com/project/JingningShi/MtreeRing" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/cti7i110hecl8kpf?svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/ropensci/MtreeRing?branch=master" class="external-link"><img src="https://codecov.io/github/ropensci/MtreeRing/coverage.svg?branch=master" alt="codecov"></a> <a href="https://github.com/ropensci/software-review/issues/287" class="external-link"><img src="https://badges.ropensci.org/287_status.svg" alt="ropensci"></a> <a href="https://cranchecks.info/pkgs/MtreeRing" class="external-link"><img src="https://cranchecks.info/badges/worst/MtreeRing" alt="cran checks"></a> <a href="https://CRAN.R-project.org/package=MtreeRing" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/MtreeRing" alt="Downloads"></a></p>
<p><code>MtreeRing</code> is a tool for automatically measuring tree-ring width using image processing techniques.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable version from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"MtreeRing"</span><span class="op">)</span></span></code></pre></div>
<p>or the development version from GitHub</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ropensci/MtreeRing"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ring-width-measurement">Ring-width measurement<a class="anchor" aria-label="anchor" href="#ring-width-measurement"></a>
</h2>
<div class="section level3">
<h3 id="1-read-an-image">1. Read an image<a class="anchor" aria-label="anchor" href="#1-read-an-image"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/MtreeRing">MtreeRing</a></span><span class="op">)</span></span>
<span><span class="co">## Read and plot a tree ring image</span></span>
<span><span class="va">img.name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"001.png"</span>, package <span class="op">=</span> <span class="st">"MtreeRing"</span><span class="op">)</span></span>
<span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ring_read.html">ring_read</a></span><span class="op">(</span>img <span class="op">=</span> <span class="va">img.name</span>, dpi <span class="op">=</span> <span class="fl">1200</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>ring_read</code> supports commonly used image formats, including png, tiff, jpg and bmp.</p>
</div>
<div class="section level3">
<h3 id="2-detect-ring-borders">2. Detect ring borders<a class="anchor" aria-label="anchor" href="#2-detect-ring-borders"></a>
</h3>
<p>After plotting the image, the automatic detection of ring borders can be performed using three alternative methods: (1) watershed algorithm; (2) Canny edge detector; (3) a linear detection algorithm from R package <a href="https://CRAN.R-project.org/package=measuRing" class="external-link">measuRing</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Split a long core sample into 2 pieces to</span></span>
<span><span class="co">## get better display performance and use the</span></span>
<span><span class="co">## watershed algorithm to detect ring borders:</span></span>
<span><span class="va">t2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ring_detect.html">ring_detect</a></span><span class="op">(</span>ring.data <span class="op">=</span> <span class="va">t1</span>, seg <span class="op">=</span> <span class="fl">2</span>, method <span class="op">=</span> <span class="st">'watershed'</span><span class="op">)</span></span></code></pre></div>
<center><img src="inst/README-img001.png" width="65%" height="65%"></center>
<center>Figure 1. The automatic detection of ring borders</center>
</div>
<div class="section level3">
<h3 id="3-calculate-ring-width-series">3. Calculate ring-width series<a class="anchor" aria-label="anchor" href="#3-calculate-ring-width-series"></a>
</h3>
<p>If all ring borders are correctly identified, you can generate a ring-width series in data frame format. Use <code>write.rwl</code> to export the ring-width series to an rwl file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rw.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ring_calculate.html">ring_calculate</a></span><span class="op">(</span>ring.data <span class="op">=</span> <span class="va">t2</span>, seriesID <span class="op">=</span> <span class="st">"940220"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AndyBunn/dplR" class="external-link">dplR</a></span><span class="op">)</span> <span class="co"># A dendrochronological analysis package</span></span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext<span class="op">=</span><span class="st">".rwl"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dplR/man/write.rwl.html" class="external-link">write.rwl</a></span><span class="op">(</span>rwl.df <span class="op">=</span> <span class="va">rw.df</span>, fname <span class="op">=</span> <span class="va">fn</span>, format <span class="op">=</span> <span class="st">"tucson"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="shiny-application">Shiny application<a class="anchor" aria-label="anchor" href="#shiny-application"></a>
</h2>
<p>If you are not familiar with R and its command line interface, the shiny-based app is a good alternative.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">MtreeRing</span><span class="fu">::</span><span class="fu"><a href="reference/ring_app_launch.html">ring_app_launch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This command allows to run a Shiny-based application within the system’s default web browser. The app provides a beginner-friendly graphical interface and supports more flexible mouse-based interactions, allowing image files to be uploaded up to 150 MB in size.</p>
<p>The dashboard has three components: a header, sidebar and body, like this</p>
<p><img src="inst/README-img002.png" width="85%" height="85%"></p>
<p>A workflow for the Shiny app can be found at <a href="https://ropensci.github.io/MtreeRing/articles/app-MtreeRing.html" class="external-link uri">https://ropensci.github.io/MtreeRing/articles/app-MtreeRing.html</a>. Most steps are demonstrated with a gif to make the workflow more understandable.</p>
</div>
<div class="section level2">
<h2 id="ring-width-correction">Ring width correction<a class="anchor" aria-label="anchor" href="#ring-width-correction"></a>
</h2>
<p>If an increment borer is used to extract samples, it is well known that the auger sometimes fails to traverse the pith of the sampled tree but passes through one side of the pith at a certain distance. Tangent lines of rings close to the pith are therefore not perpendicular to the horizontal path, which may lead to considerable errors in ring widths.</p>
<p>Under such conditions, you can create two paths by setting the argument <code>incline = TRUE</code>, or by ticking the checkbox <strong>Inclined tree rings</strong>. See this example.</p>
<p><img src="inst/RingCorrection.png" width="80%" height="80%"></p>
<p>The line segment connecting two dots on the same ring should match the tangent of a tree ring border. The corrected ring width is estimated from the distance between adjacent rings and orientation of ring borders.</p>
</div>
<div class="section level2">
<h2 id="support">Support<a class="anchor" aria-label="anchor" href="#support"></a>
</h2>
<p>Any feedback, bug reports or suggestions are welcomed. If you have a comment on <code>MtreeRing</code>, or you find a bug in the released or beta versions, please submit bugs and/or feature requests at <a href="https://github.com/ropensci/MtreeRing/issues" class="external-link uri">https://github.com/ropensci/MtreeRing/issues</a>. Include the package version, OS, and any command-line required to reproduce the problem.</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>I will try to add new features based on user feedback. It is hoped that others will contribute additional useful features. Please note that the ‘MtreeRing’ project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=MtreeRing" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ropensci/MtreeRing/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ropensci/MtreeRing/issues" class="external-link">Report a bug</a></li>
</ul>
</div>



<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing MtreeRing</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jingning Shi <br><small class="roles"> Author, maintainer </small>  </li>
<li>Wei Xiang <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="r-universe">
<h2 data-toc-skip>R-universe</h2>
<ul class="list-unstyled">
<li><p><a href="https://ropensci.r-universe.dev/MtreeRing" class="external-link"><img src="https://ropensci.r-universe.dev/badges/MtreeRing" alt="MtreeRing status badge"></a></p></li>
</ul>
</div>

<div class="software-peer-review">
<h2 data-toc-skip>Software Peer-Review</h2>
<ul class="list-unstyled">
<li><p><a href="https://github.com/ropensci/software-review/issues/287" class="external-link"><img src="https://badges.ropensci.org/287_status.svg" alt="rOpenSci peer-review"></a></p></li>
</ul>
</div>

  </aside>
</div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
